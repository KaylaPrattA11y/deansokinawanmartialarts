---
import { BASE_URL, ROUTES } from "../../config/site";
import type { Post } from "../../types";
import ArticleMeta from "./ArticleMeta.astro";
import Button from "../Button.astro";

const { post } = Astro.props as { post: Post };
---

<article class={`post-card${post.data.image ? ' has-image' : ''}`}>
  <div>
  {
    post.data.image && (
      <img src={post.data.image} alt={post.data.title} class="post-image" />
    )
  }
  </div>
  <div class="post-content">
    <ArticleMeta {post} isStub={true} />
    <Button variant="secondary" href={`${BASE_URL}${ROUTES.news}${post.slug}/`}>Read More</Button>
  </div>
</article>

<style>
  @layer components {
    .post-card.has-image {
      @container (width < 900px) {
        display: grid;
        grid-template-columns: 0.5fr 1fr;
      }
    }
    .post-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      @container (width >= 900px) {
        height: 200px;
      }
    }
    .post-content {
      padding: 1.5rem;
    }
    .read-more {
      font-family: var(--ff-heading);
      font-size: 1rem;
      color: var(--paper);
      text-decoration-color: var(--bright-red);
      text-decoration-thickness: 2px;
    }
    .read-more:hover {
      text-decoration: none;
    }
  }
</style>
